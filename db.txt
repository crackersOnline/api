FLUSH HOSTS;

create database crackersdb;
CREATE TABLE `crackersdb`.`users` (
 `userID` INT NOT NULL AUTO_INCREMENT,
 `userName` VARCHAR(45) NULL,
 `userMobile` VARCHAR(45) NULL,
 `userAddress` VARCHAR(255) NULL,
 `userCity` VARCHAR(45) NULL,
 `userState` VARCHAR(45) NULL,
 `userPincode` VARCHAR(45) NULL,
 `userEmail` VARCHAR(45) NULL,
 `userStatus` VARCHAR(45) NULL,
 `userRole` VARCHAR(45) NULL,
 `createdBy` INT NULL,
 `createdOn` DATETIME NULL,
 `updatedBy` INT NULL,
 `updatedOn` DATETIME NULL,
 PRIMARY KEY (`userID`));


CREATE TABLE `crackersdb`.`Order` (
 `orderID` INT NOT NULL AUTO_INCREMENT,
 `orderProducts` VARCHAR(255) NULL,
 `orderDate` DATETIME NULL,
 `orderStatus` VARCHAR(45) NULL,
 `paymentMethod` VARCHAR(45) NULL,
 `paymentStatus` VARCHAR(45) NULL,
 `deliveryAddress` VARCHAR(255) NULL,
 `userID` INT NULL,
 `cartAmount` VARCHAR(45) NULL,
 `couponApplied` VARCHAR(45) NULL,
 `orderDiscount` VARCHAR(45) NULL,
 `orderAmount` decimal NULL,
 `cancelReason` VARCHAR(255) NULL,
 `updatedOn` DATETIME NULL,
 PRIMARY KEY (`orderID`),
FOREIGN KEY (`userID`) REFERENCES users(`userID`));

CREATE TABLE `crackersdb`.`AddressBook` (
 `addressID` INT NOT NULL AUTO_INCREMENT,
 `userID` INT NULL ,
 `address` VARCHAR(255) NULL,
 `city` VARCHAR(45) NULL,
 `state` VARCHAR(45) NULL,
 `pincode` INT NULL,
 `mobile` VARCHAR(45) NULL,
 `status` INT NULL,
 `createdOn` DATETIME NULL,
 `updatedOn` DATETIME NULL,
 PRIMARY KEY (`addressID`),
FOREIGN KEY (`userID`) REFERENCES users(`userID`));


CREATE TABLE `crackersdb`.`Category` (
 `categoryID` INT NOT NULL AUTO_INCREMENT,
 `categoryName` VARCHAR(255) NULL,
 `parentCategoryID` INT NULL,
 `status` VARCHAR(45) NULL,
 `createdBy` INT NULL,
 `createdOn` DATETIME NULL,
 PRIMARY KEY (`categoryID`));


CREATE TABLE `crackersdb`.`Product` (
 `productID` INT NOT NULL AUTO_INCREMENT,
 `productName` VARCHAR(255) NULL ,
 `categoryID` INT NULL,
 `productDescription` TEXT NULL,
 `productMRP` VARCHAR(45) NULL,
 `prouductPrice` VARCHAR(45) NULL,
 `mobile` VARCHAR(45) NULL,
 `status` VARCHAR(45) NULL,
 `createdBy` INT NULL,
 `createdOn` DATETIME NULL,
 PRIMARY KEY (`productID`),
FOREIGN KEY (`categoryID`) REFERENCES Category(`categoryID`));


CREATE TABLE `crackersdb`.`Coupon` (
 `couponID` INT NOT NULL AUTO_INCREMENT,
 `couponCode` VARCHAR(255) NULL ,
 `couponValue` VARCHAR(255) NULL ,
 `vaildOn` DATETIME NULL,
 `createdBy` INT NULL,
 `createdOn` DATETIME NULL,
 PRIMARY KEY (`couponID`),
FOREIGN KEY (`createdBy`) REFERENCES users(`userID`));

ALTER TABLE `crackersdb`.`users` ADD COLUMN `password` VARCHAR(45) NULL  AFTER `userName` ;



INSERT INTO `category` (`categoryID`,`categoryName`,`parentCategoryID`,`status`,`createdBy`,`createdOn`) VALUES (1,'Gift Boxes',0,'1',NULL,NULL);
INSERT INTO `category` (`categoryID`,`categoryName`,`parentCategoryID`,`status`,`createdBy`,`createdOn`) VALUES (2,'Fancy Fountains',0,'1',NULL,NULL);
INSERT INTO `category` (`categoryID`,`categoryName`,`parentCategoryID`,`status`,`createdBy`,`createdOn`) VALUES (3,'Flower Pots',0,'0',NULL,NULL);
INSERT INTO `category` (`categoryID`,`categoryName`,`parentCategoryID`,`status`,`createdBy`,`createdOn`) VALUES (4,'Sparklers',0,'1',NULL,NULL);
INSERT INTO `category` (`categoryID`,`categoryName`,`parentCategoryID`,`status`,`createdBy`,`createdOn`) VALUES (5,'Deluxe Crackers',0,'1',NULL,NULL);

INSERT INTO `product` (`productID`,`productName`,`categoryID`,`productDescription`,`productMRP`,`prouductPrice`,`status`,`createdBy`,`createdOn`) VALUES (1,'20 Deluxe Crackers',5,'Days were gone where we celebrated diwali with flower pots and Ground Chakkars, it’s time to celebrate the festivals with fancy deluxe crackers. At any point anyone have an idea on Fancy Deluxe crackers, the site “Crackersshope” comes into their mind.\r\n','160','53','1',NULL,NULL);
INSERT INTO `product` (`productID`,`productName`,`categoryID`,`productDescription`,`productMRP`,`prouductPrice`,`status`,`createdBy`,`createdOn`) VALUES (2,'Silver Gift Box',1,'It is an excellent gift to share to your companions and relatives during special occasions especially diwali. Our Crackers Shope gift box will contain more ranges that can be utilized by all age group people. What’s more, crackers as a pack that can’t acquired in market at best cost. It will have a list of items that were specifically packed in each gift box','900','450','1',NULL,NULL);
INSERT INTO `product` (`productID`,`productName`,`categoryID`,`productDescription`,`productMRP`,`prouductPrice`,`status`,`createdBy`,`createdOn`) VALUES (3,'Rap (silver & red fountain)',2,'Celebration could not be perfect without colorful crackers. Make your occasion more memorable and special with exclusive range of fancy fountains from your crackersshope.com. All these fancy fountains crackers are very colorful and unique in all viewpoints. Choose the best quality wafers which splendidly suit the event.','900','450','1',NULL,NULL);
INSERT INTO `product` (`productID`,`productName`,`categoryID`,`productDescription`,`productMRP`,`prouductPrice`,`status`,`createdBy`,`createdOn`) VALUES (4,'Flowers Pots Small',3,'Create amazing and perpetual memories with crackers, which is perfect for all occasions like Diwali, New Year, Christmas, Birthday Parties, weddings, and all exclusive occasions.  If you are searching for online crackers shopping in Sivakasi, Crackers Shope is the best online portal to buy exclusive range of flowerpot crackers at wholesale price.','136','68','1',NULL,NULL);
INSERT INTO `product` (`productID`,`productName`,`categoryID`,`productDescription`,`productMRP`,`prouductPrice`,`status`,`createdBy`,`createdOn`) VALUES (5,'7 cm Electric Sparklers',4,'Create excellent and everlasting memories with sparklers, ideal for all festivals like Diwali, Christmas, New Year, Marriage parties, Birthday Parties and all special occasions. Check out our online portal now for latest great deals and offers to create an excellent and magical crackers display for any special events.','30','15','1',NULL,NULL);
INSERT INTO `product` (`productID`,`productName`,`categoryID`,`productDescription`,`productMRP`,`prouductPrice`,`status`,`createdBy`,`createdOn`) VALUES (6,'24 Deluxe crackers',5,'Days were gone where we celebrated diwali with flower pots and Ground Chakkars, it’s time to celebrate the festivals with fancy deluxe crackers. At any point anyone have an idea on Fancy Deluxe crackers, the site “Crackersshope” comes into their mind.','122','61','1',NULL,NULL);
INSERT INTO `product` (`productID`,`productName`,`categoryID`,`productDescription`,`productMRP`,`prouductPrice`,`status`,`createdBy`,`createdOn`) VALUES (7,'100 Deluxe Crackers',5,'Days were gone where we celebrated diwali with flower pots and Ground Chakkars, it’s time to celebrate the festivals with fancy deluxe crackers. At any point anyone have an idea on Fancy Deluxe crackers, the site “Crackersshope” comes into their mind.','518','259','1',NULL,NULL);
INSERT INTO `product` (`productID`,`productName`,`categoryID`,`productDescription`,`productMRP`,`prouductPrice`,`status`,`createdBy`,`createdOn`) VALUES (8,'15 cm. Green Sparklers',4,NULL,'104','52','1',NULL,NULL);

ALTER TABLE `crackersdb`.`product` CHANGE COLUMN `prouductPrice` `productPrice` VARCHAR(45) NULL DEFAULT NULL  ;

CREATE  TABLE `crackersdb`.`cart` (
  `cartID` INT NOT NULL AUTO_INCREMENT ,
  `userID` INT NULL ,
  `productID` INT NULL ,
  `productName` VARCHAR(255) NULL ,
  `categoryID` INT NULL ,
  `categoryName` VARCHAR(255) NULL ,
  `productPrice` VARCHAR(45) NULL ,
  `productQty` VARCHAR(45) NULL ,
  `userOrderStatus` INT(1) NULL ,
  `createdOn` DATETIME NULL ,
  `updatedOn` TIMESTAMP NULL ,
  PRIMARY KEY (`cartID`) ,
  INDEX `userid_idx` (`userID` ASC) ,
  INDEX `productid_idx` (`productID` ASC) ,
  INDEX `categoryid_idx` (`categoryID` ASC) ,
  CONSTRAINT `userid`
    FOREIGN KEY (`userID` )
    REFERENCES `crackersdb`.`users` (`userID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `productid`
    FOREIGN KEY (`productID` )
    REFERENCES `crackersdb`.`product` (`productID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `categoryid`
    FOREIGN KEY (`categoryID` )
    REFERENCES `crackersdb`.`category` (`categoryID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

    ALTER TABLE `crackersdb`.`users` ADD COLUMN `activationPIN` TEXT NULL  AFTER `userStatus` ;
ALTER TABLE `crackersdb`.`users` CHANGE COLUMN `userRole` `userRole` VARCHAR(45) NULL DEFAULT 'User'  ;

